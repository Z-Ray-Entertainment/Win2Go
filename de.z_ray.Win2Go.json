{
  "app-id": "de.z_ray.Win2Go",
  "runtime": "org.gnome.Platform",
  "runtime-version": "48",
  "sdk": "org.gnome.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.ocaml"
  ],
  "command": "win2go",
  "finish-args": [
    "--socket=wayland",
    "--socket=fallback-x11",
    "--system-talk-name=org.freedesktop.UDisks2",
    "--filesystem=xdg-download",
    "--filesystem=/run/media"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig",
    "/man",
    "/share/doc",
    "/share/gtk-doc",
    "/share/man",
    "/share/pkgconfig",
    "*.la",
    "*.a"
  ],
  "modules": [
    {
      "name": "perl",
      "no-autogen": true,
      "post-install": [
        "find /app/lib/perl5/ -name \"*.so\" -exec chmod 755 {} \\;"
      ],
      "cleanup": [
        "/bin",
        "/man",
        "/lib/perl5/site_perl",
        "*.pod",
        "*.h"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://www.cpan.org/src/5.0/perl-5.42.0.tar.gz",
          "sha256": "e093ef184d7f9a1b9797e2465296f55510adb6dab8842b0c3ed53329663096dc"
        },
        {
          "type": "script",
          "dest-filename": "configure",
          "commands": [
            "exec ./configure.gnu $@"
          ]
        }
      ]
    },
    {
      "name": "perl-io-stringy",
      "no-autogen": true,
      "buildsystem": "simple",
      "build-commands": [
        "perl Makefile.PL",
        "make",
        "make install"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://cpan.metacpan.org/authors/id/D/DS/DSKOLL/IO-stringy-2.111.tar.gz",
          "sha256": "8c67fd6608c3c4e74f7324f1404a856c331dbf48d9deda6aaa8296ea41bf199d"
        }
      ]
    },
    {
      "name": "hivex",
      "builddir": true,
      "buildsystem": "simple",
      "post-install": [
        "find /app/lib/perl5/ -name \"*.so\" -exec chmod 755 {} \\;"
      ],
      "build-options": {
        "append-path": "/usr/lib/sdk/ocaml/bin"
      },
      "build-commands": [
        "autoreconf -i",
        "./generator/generator.ml",
        "./configure --prefix=${FLATPAK_DEST} --disable-python --disable-ruby",
        "make",
        "make check",
        "make install"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/libguestfs/hivex",
          "tag": "v1.3.24"
        }
      ]
    },
    {
      "name": "dasbus",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} . --no-build-isolation"
      ],
      "builddir": true,
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/dasbus-project/dasbus",
          "tag": "v1.7"
        }
      ]
    },
    {
      "name": "blueprint-compiler",
      "buildsystem": "meson",
      "cleanup": [
        "*"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/blueprint-compiler",
          "tag": "v0.18.0"
        }
      ]
    },
    {
      "name": "wimlib",
      "builddir": true,
      "sources": [
        {
          "type": "archive",
          "url": "https://wimlib.net/downloads/wimlib-1.14.4.tar.gz",
          "sha256": "3633db2b6c8b255eb86d3bf3df3059796bd1f08e50b8c9728c7eb66662e51300"
        }
      ],
      "config-opts": [
        "-disable-static",
        "-without-fuse",
        "-without-ntfs-3g"
      ]
    },
    {
      "name": "win2g0",
      "builddir": true,
      "buildsystem": "meson",
      "sources": [
        {
          "type": "dir",
          "path": "."
        }
      ]
    }
  ]
}