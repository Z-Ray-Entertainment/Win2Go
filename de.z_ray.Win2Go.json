{
  "app-id": "de.z_ray.Win2Go",
  "runtime": "org.gnome.Platform",
  "runtime-version": "48",
  "sdk": "org.gnome.Sdk",
  "command": "win2go",
  "finish-args": [
    "--socket=wayland",
    "--socket=fallback-x11",
    "--system-talk-name=org.freedesktop.UDisks2",
    "--filesystem=xdg-download",
    "--filesystem=/run/media"
  ],
  "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
  ],
  "modules": [
    {
      "name": "winlib",
      "builddir": true,
      "sources": [
        {
          "type": "archive",
          "url": "https://wimlib.net/downloads/wimlib-1.14.4.tar.gz",
          "sha256": "3633db2b6c8b255eb86d3bf3df3059796bd1f08e50b8c9728c7eb66662e51300"
        }
      ],
      "config-opts": [
        "-disable-static",
        "-without-fuse",
        "-without-ntfs-3g"
      ]
    },
    {
      "name": "bcd-sys",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p ${FLATPAK_DEST}/share/BCD-SYS/Resources",
        "install Linux/bcd-sys.sh ${FLATPAK_DEST}/bin/bcd-sys",
        "install Linux/recovery.sh ${FLATPAK_DEST}/share/BCD-SYS",
        "install Linux/update_device.sh ${FLATPAK_DEST}/share/BCD-SYS",
        "install Linux/wbmfwvar.sh ${FLATPAK_DEST}/share/BCD-SYS",
        "install Linux/winload.sh ${FLATPAK_DEST}/share/BCD-SYS",
        "install Resources/attach-vhdx.sh ${FLATPAK_DEST}/bin/attach-vhdx",
        "install Resources/detach-vhdx.sh ${FLATPAK_DEST}/bin/detach-vhdx",
        "cp Resources/*.txt ${FLATPAK_DEST}/share/BCD-SYS/Resources",
        "cp -r Templates ${FLATPAK_DEST}/share/BCD-SYS",
        "perl -i -pe\"s|resdir=\\\".\\\"|resdir=\\\"${FLATPAK_DEST}/share/BCD-SYS\\\"|\" ${FLATPAK_DEST}/bin/bcd-sys",
        "perl -i -pe\"s|tmpdir=\\\".\\\"|tmpdir=\\\"/tmp\\\"|\" ${FLATPAK_DEST}/bin/bcd-sys",
        "perl -i -pe\"s|resdir=\\\".\\\"|resdir=\\\"${FLATPAK_DEST}/share/BCD-SYS\\\"|\" ${FLATPAK_DEST}/share/BCD-SYS/recovery.sh",
        "perl -i -pe\"s|resdir=\\\".\\\"|resdir=\\\"${FLATPAK_DEST}/share/BCD-SYS\\\"|\" ${FLATPAK_DEST}/share/BCD-SYS/winload.sh"
      ],
      "builddir": true,
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/jpz4085/BCD-SYS",
          "tag": "v2.1"
        }
      ]
    },
    {
      "name": "dasbus",
      "buildsystem": "simple",
      "build-commands": [
            "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} . --no-build-isolation"
      ],
      "builddir": true,
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/dasbus-project/dasbus",
          "tag": "v1.7"
        }
      ]
    },
    {
      "name": "blueprint-compiler",
      "buildsystem": "meson",
      "cleanup": ["*"],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/blueprint-compiler",
          "tag": "v0.18.0"
        }
      ]
    },
    {
      "name": "win2g0",
      "builddir": true,
      "buildsystem": "meson",
      "sources": [
        {
          "type": "dir",
          "path": "."
        }
      ]
    }
  ]
}